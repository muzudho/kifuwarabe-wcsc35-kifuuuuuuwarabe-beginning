# バグ・パレード

* 静止探索に関して
    * [ ] 火星が、キリンではなくヒヨコを取る手を優先した。明らかにキリンを取る方が得だが。
    * [ ] 安い駒から交換してほしい。
        * [ ] 火星も安い駒から交換してほしい。
    * [ ] 馬の駒の価値が０点になってないか？
        * [ ] 応手として相手がタダ捨ての銀をすると読んでいるケースがある。応手は全部読むから合っているが、選ばれているのが間違っている。タダ捨ての銀を取ったヒヨコを取るから、末端局面では－２点得と判断してる。
            * [ ] ［－２点だから指さない］といった指し手が要るのでは？
* 探索全般に関して
    * [x] 一手詰まされ、自分と相手で逆か？
    * [x] 違う棋譜見てる。 `2h8h, ２八→８八き, (1)[-4] (2)３三→８八v角成-き[-4] (3)７九→８八ね+馬[12] (終端外)敵の静止   ,   -4       ok, QS_select, , , , , , , , , , , , , , , , , , , , `
        * 全部指す、全部巻き戻すで対応。
    * [ ] ４階で一手詰まされと誤認してる。 `8h3c+, ８八→３三ぞ成+歩, (1)[-100012] (2)３二→３三vい+馬[-100012] (3)８二→５二飛[-100000] (終端外)私の投了 私は一手詰まされ  , -100012 cap ok, QS_select, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, True, NR_remaining, BM_bestmove`
* 指し手に関して
    * [ ] **FIXME** ８九の桂が７七に跳ねると、象頭の守りの邪魔になることが多いから止めさせたい。
    * [ ] **FIXME** 敵玉から自駒の鶏が離れていく手を止めさせたい。
* ネガティブ・ルールに関して
    * [ ] **FIXME** ［戻るな］コマンドは、利きを受けている駒は適用除外にしたい。
    * [ ] **FIXME** 号令［相手が手を戻したら自分も戻せ］で戻したときの動きは、号令［戻るな］の対象外にしたい。指し手履歴にフラグ辞書を持たせるか？
        * [ ] スタンプ・カウント・シートを作る。探索中の２手目に駒の移動先になったマスはその回数を記憶する。０より大きければ、そのマスの駒は取られる可能性がある？
* その他
    * [ ] 駒の取り合いは［後ろ向き］ではなく［前向き］で探索しないとおかしくなるのでは？ 後ろの方で実現しない枝を選んでる。
    * [ ] **FIXME** 落ちてる歩を守るより、自陣に駒を打たせない方が得、というのが見えてない。
    * [ ] **FIXME** 質駒があるとき、駒を取ることを過小評価してしまう？
    * [ ] 後手、ネガティブ・ルールが効かなくなってる。QSの凡手が邪魔してるかも。要確認。
        * [ ] ［他に負の点がない］ときの［駒を取らない］［０点の手］はリストから除外しているか？
    * [ ] 初手で駒を取らず、残りの２手で駒を取る場合、初手の無駄な動きに駒得の点が入ることがある。これでは、初手は出鱈目になってしまう。初手の貢献度、必然性を判定できないか？
        * [x] 初手で駒を取らなかったケースは、探索深さを一手延長する
    * [ ] 駒の取り合いは、自分と相手を１組みとしないと、不公平になる。
        * [ ] 駒の価値の逓減は、自分と相手で１組にしたい。
    * [ ] 駒をポンポン打ってしまう。駒を打つことに対してネガティブ・ルールを書いてないから。
    * [ ] 駒を取らない手を指すと、相手が飛車で歩を取るので、同角とする、のようなあり得ない読み筋がある。
    * [ ] 歩の前に象が移動する手を指すが、自分の象が取り返される手より、他の駒が［ひ］を取る手を読んでいる。
    * [ ] 読みの末端で、飛がタダで突っ込んできて［ひ］を取るので同象して高い点だ、と判定していることがある。
