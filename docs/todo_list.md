# TODO list

* 宣言に関して
    * [ ] 入玉宣言勝ちしてない
* 基本機能に関して
    * [x] 地球と火星の区別を無くす PtolemaicTheoryModel が欲しい。
    * [x] ひとまず、指し手について、ログに残してはどうか。
* 拡張コマンドに関して
    * [ ] xs_board コマンド作成
    * [x] 指定の指し手だけ静止探索するコマンドが欲しい。 `go_qs` とか。
* 探索の終端外に関して
    * [ ] `out_of_termination` には何階かの情報も欲しい。
* ［ルート探索］に関して
    * [ ] １手目が駒を取らない手のときも、２手目も読まないと、０点という安全な手になってしまう。
* ［カウンター探索］に関して
    * [ ] 静止探索の中で、１手目が駒を取らない手のときには、２手目も駒を取らない手（打を含みたい）も探索対象にしたい。
    * [ ] TODO ［カウンター探索］では、相手の利きの上に置くか、相手の駒に利きを当てる（王手含む）のどちらでもない駒打ちは省きたい。
* ［静止探索］に関して
    * [ ] 静止探索に時間がかかりすぎている。ノード数を調べたい。
        * [ ] 打つ手は、駒１つ調べれば他の駒種類も同様なのでは？
    * [ ] 駒を打つ手は、３手目に駒が取れるとか、そういう駒取りに絡む手を指してほしい。
    * [ ] ベータカットしたい
    * [ ] 放置していると、ただで他の駒を取られる状況を評価してない。
    * [ ] このソフトでの静止探索は、［負数をカットする］［非整数しかなければベスト値を取る］のが役割。
    * [ ] 探索のツリー構造のログが見たい。
    * [ ] 王手の時は静止探索を延長したい。
    * [x] TODO お互いが馬や竜を作り、取り返さず、取り続けた場合、静止探索は全駒とはいかないまでも、かなり長くなる。従って、取った駒を取り返すことを第一に考える制約を付けたい。 --> filtering_same_destination_move_list()。
    * [ ] 幅優先探索の方がいいのか？
* ［探索全般］に関して
    * [ ] リボーカー（Revoker）コレクションを作りたい。それをノード来訪時の１箇所に置きたい。各ルールはノード来訪時に、その結果を参照するだけにしたい。
    * [ ] 通常探索、静止探索、王手延長探索の３つに分けたい。
* 盤上の駒の指し手に関して
    * [ ] 金が三角形の動きをする手待ちを止めさせたい。
    * [x] ゾウ、ウサギの頭のヒヨコを突くのを止めさせたい。
    * [ ] 乱数任せだと、飛車や角を動かしやすい。確率を駒単位に変えれないか？
    * [ ] ［金底の歩］という格言はあるが、歩の隙間から、陣の外へ金が出ていくのは止めてほしい。
    * [ ] 成り駒を作らせない動きをしてほしい。相手の飛車が成ることを防いでほしい。
        * [ ] それ以前に、角頭を守っていた駒が遠くへ引くのを止めてほしい。
* 打に関して
    * [x] 自陣に意味のない飛車を打つのを止めさせたい。---> 一律、自陣に飛車を打たせないことにする。
    * [ ] そっぽに駒を集めるのを止めさせたい。
        * [ ] 自玉、敵玉に金銀を寄せるルールを一般化したい。
            * [ ] （振り飛車の方針上）自玉は、先手視点で自陣の左辺に寄ることはないという制約を付けてよい。入玉があるので自陣より上については言及しない。
                * [ ] 任意のマスＡについて、自玉、敵玉とのチェビシェフ距離を算出したい。
    * [ ] 歩で間駒した方が得なときに、間駒してくれない。
* 入玉に関して
    * [ ] と金が１段目に入ることがあるが、と金より先に玉を１段目に入れたい。
* ポジティブ・ルール案
    * [x] 号令［相手が手を戻したら自分も戻せ］
* ネガティブ・ルール案
    * [x] 打つな。打つのは静止探索の結果によってだけにする。
* ログについて
    * [x] ポジティブ・ルールで選ばれた指し手も出したい。
